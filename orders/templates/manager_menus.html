<h3> Menu:</h3>
<div id="menu_display"></div>
<input type="button" class="button" value="save" id="save" style="float:left;">

</br>
</br>

{{ menu }}
</br>
</br>
{{ json_menu|safe }}

<script type='text/javascript'>
	var menu = $.parseJSON('{{ json_menu|safe }}');
	$('#menu_display').jstree({
		"json_data": menu,
		"types": {
			"max_depth": 4,
			"types": {
				"root" : {
					"icon": {
						"image": "http://static.jstree.com/v.1.0rc/_docs/_drive.png"
					},
					"start_drag" : false,
                    "move_node" : false,
                    "delete_node" : false,
                    "remove" : false
				}
			}
		},
		"themes": {
			"theme": "apple"
		},
		"plugins" : [ "themes", "json_data", "ui", "dnd", "crrm", "contextmenu", "hotkeys", "unique", "types" ]
		});
	$("#save").click(function () {
        var tree = $("#menu_display").jstree("get_json", -1);
		$.ajax({
			data: {
				'tree': JSON.stringify(tree),
				'csrfmiddlewaretoken': '{{ csrf_token }}'},
			type: "post",
		});
    });
</script>